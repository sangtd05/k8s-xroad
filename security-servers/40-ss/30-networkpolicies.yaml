apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: ss-secondary-allow
  namespace: xroad
spec:
  podSelector: { matchLabels: { app: ss-secondary } }
  policyTypes: ["Ingress","Egress"]
  ingress:
    - ports:
        - { port: 5500 }
        - { port: 5577 }
        - { port: 5588 }
  egress:
    - {}  # allow all egress, tighten as needed
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: ss-primary-allow
  namespace: xroad
spec:
  podSelector: { matchLabels: { app: ss-primary } }
  policyTypes: ["Ingress","Egress"]
  ingress:
    - from:
        - podSelector: { matchLabels: { app: ss-secondary } }
      ports:
        - { port: 22 }
        - { port: 5588 }
        - { port: 4000 }
  egress:
    - {}  # allow all egress, tighten as needed
